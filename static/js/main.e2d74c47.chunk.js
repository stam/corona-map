(this["webpackJsonpcorona-measures"]=this["webpackJsonpcorona-measures"]||[]).push([[0],{200:function(e,t,n){e.exports=n(390)},205:function(e,t,n){},390:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(43),i=n.n(o),c=(n(205),n(23)),l=n(170),u=n(10),s=n(16),p=n(17),d=n(171),b=n(393),f=n(395),m=n(394);function y(){var e=Object(s.a)(["\n  flex: 1;\n"]);return y=function(){return e},e}var h=[54.83312727008725,39.43954467773438],g=4;window.innerWidth<800&&(h=[35.20607492223198,11.62731170654297],g=4);var v,O,w,j,D,E,x,k,C,z,A,I,P,T=Object(p.a)(b.a)(y()),J={20:"#f2d776",60:"#e2a941",120:"#cd6b1a",240:"#b73b12",1e5:"#7d1008"},M=function(e){if(void 0===e)return"rgba(0, 0, 0, 0.3)";var t=Object.entries(J).find((function(t){var n=Object(d.a)(t,2),a=n[0];n[1];return e<parseInt(a)}));return t?t[1]:"lightskyblue"},W=Object(c.a)((function(e){var t=e.store,n=e.onSelect,o=function(e){n(e.target.feature.properties.NAME)},i=Object(a.useMemo)((function(){return function(e){var n,a=null===e||void 0===e?void 0:e.properties.NAME,r=null===(n=t.selectedDateWorldData[a])||void 0===n?void 0:n.biweeklyTotalPer100k;return{fillColor:M(r),weight:1,opacity:.5,color:"black",fillOpacity:.79}}}),[t.selectedDateWorldData]);return r.a.createElement(T,{center:h,zoom:g},r.a.createElement(f.a,{url:"https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png",attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),!t.loading&&r.a.createElement(m.a,{data:t.geoJson,style:i,onEachFeature:function(e,n){var a=null===e||void 0===e?void 0:e.properties.NAME;n.on({click:o,mouseover:function(e){var r;n.bindTooltip("<b>".concat(a,": ").concat((null===(r=t.selectedDateWorldData[a])||void 0===r?void 0:r.biweeklyTotalPer100k)||"???"," </b><br/> 14-day cumulative number of <br/>COVID-19 cases per 100 000")).openTooltip()},mouseout:function(e){}})}}))})),S=(n(207),n(37)),_=n.n(S),G=n(72),N=n(24),Y=n(159),K=n(100),B=n(11),H=(n(209),n(4)),L=new(v=H.n.ref,O=H.n.ref,w=H.n.ref,j=function(){function e(){Object(Y.a)(this,e),Object(N.a)(this,"loading",D,this),Object(N.a)(this,"visibleDate",E,this),Object(N.a)(this,"date",x,this),this._dateTimeoutHandler=void 0,Object(N.a)(this,"worldData",k,this),Object(N.a)(this,"countryData",C,this),Object(N.a)(this,"geoJson",z,this),Object(N.a)(this,"dateCount",A,this),Object(N.a)(this,"startDate",I,this),Object(N.a)(this,"selectedCountry",P,this),this.bootstrap()}return Object(K.a)(e,[{key:"dateIndex",get:function(){return this.date.toISOString().split("T")[0]}}]),Object(K.a)(e,[{key:"bootstrap",value:function(){var e=Object(G.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchGeoJson();case 2:return e.next=4,this.fetchData();case 4:this.selectedCountry&&this.selectCountry(this.selectedCountry),this.loading=!1;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchData",value:function(){var e=Object(G.a)(_.a.mark((function e(){var t,n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("/corona-map","/countries.json"));case 2:return t=e.sent,e.next=5,t.json();case 5:return this.countryData=e.sent,e.next=8,fetch("".concat("/corona-map","/world.json"));case 8:return n=e.sent,e.next=11,n.json();case 11:this.worldData=e.sent;case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"selectCountry",value:function(e){this.selectedCountry=e;var t=this.countryData[e],n=Object.keys(t)[0];n&&(this.dateCount=(new Date(n).getTime()-this.startDate.getTime())/1e3/60/60/24)}},{key:"changeDate",value:function(e){this.visibleDate=e,this.date=e}},{key:"fetchGeoJson",value:function(){var e=Object(G.a)(_.a.mark((function e(){var t;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("/corona-map","/europe.geojson"));case 2:return t=e.sent,e.next=5,t.json();case 5:this.geoJson=e.sent;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"selectedCountryData",get:function(){return this.selectedCountry?this.countryData[this.selectedCountry]:{}}},{key:"selectedDateWorldData",get:function(){return this.worldData[this.dateIndex]}}]),e}(),D=Object(B.a)(j.prototype,"loading",[H.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),E=Object(B.a)(j.prototype,"visibleDate",[H.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Date("2020-10-25")}}),x=Object(B.a)(j.prototype,"date",[H.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Date("2020-10-25")}}),Object(B.a)(j.prototype,"dateIndex",[H.g],Object.getOwnPropertyDescriptor(j.prototype,"dateIndex"),j.prototype),k=Object(B.a)(j.prototype,"worldData",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),C=Object(B.a)(j.prototype,"countryData",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),z=Object(B.a)(j.prototype,"geoJson",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=Object(B.a)(j.prototype,"dateCount",[H.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),I=Object(B.a)(j.prototype,"startDate",[H.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Date("2020-01-01")}}),P=Object(B.a)(j.prototype,"selectedCountry",[H.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Netherlands"}}),Object(B.a)(j.prototype,"selectedCountryData",[H.g],Object.getOwnPropertyDescriptor(j.prototype,"selectedCountryData"),j.prototype),Object(B.a)(j.prototype,"selectedDateWorldData",[H.g],Object.getOwnPropertyDescriptor(j.prototype,"selectedDateWorldData"),j.prototype),Object(B.a)(j.prototype,"bootstrap",[H.f],Object.getOwnPropertyDescriptor(j.prototype,"bootstrap"),j.prototype),Object(B.a)(j.prototype,"fetchData",[H.f],Object.getOwnPropertyDescriptor(j.prototype,"fetchData"),j.prototype),Object(B.a)(j.prototype,"selectCountry",[H.f],Object.getOwnPropertyDescriptor(j.prototype,"selectCountry"),j.prototype),Object(B.a)(j.prototype,"changeDate",[H.f],Object.getOwnPropertyDescriptor(j.prototype,"changeDate"),j.prototype),Object(B.a)(j.prototype,"fetchGeoJson",[H.f],Object.getOwnPropertyDescriptor(j.prototype,"fetchGeoJson"),j.prototype),j),F=n(21),V=n(169),q=n.n(V),Q=function(e){var t=e.store,n=Object(a.useMemo)((function(){return Object.values(t.selectedCountryData).reverse()}),[t.selectedCountryData]);return r.a.createElement("div",null,r.a.createElement(F.e,{aspect:16/7},r.a.createElement(F.c,{data:n},r.a.createElement(F.g,{dataKey:"date"}),r.a.createElement(F.h,{yAxisId:"cases",domain:[0,1e3]}),r.a.createElement(F.h,{yAxisId:"hospital",domain:[0,100],orientation:"right"}),r.a.createElement(F.a,{stroke:"#eee",strokeDasharray:"5 5"}),r.a.createElement(F.f,{isAnimationActive:!1}),r.a.createElement(F.d,{yAxisId:"cases",x:q()(t.date).format("YYYY-MM-DD")}),r.a.createElement(F.b,{type:"monotone",yAxisId:"cases",dot:!1,dataKey:"biweeklyTotalPer100k",isAnimationActive:!1,stroke:"#8884d8"}),r.a.createElement(F.b,{type:"monotone",yAxisId:"hospital",dot:!1,dataKey:"hospitalOccupancyPer100k",isAnimationActive:!1,stroke:"hotpink"}))))};function R(){var e=Object(s.a)(["\n  margin-top: auto;\n  font-size: 0.8rem;\n  color: rgba(0, 0, 0, 0.5);\n  padding-bottom: 1rem;\n"]);return R=function(){return e},e}function U(){var e=Object(s.a)(["\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n"]);return U=function(){return e},e}function X(){var e=Object(s.a)(["\n  table:first-of-type td:first-of-type {\n    width: 3rem;\n    text-align: right;\n  }\n"]);return X=function(){return e},e}var Z=p.a.table(X()),$=p.a.div(U()),ee=p.a.div(R()),te=Object(c.a)((function(e){var t,n=e.store,a=n.selectedCountry;if(!a)return r.a.createElement($,null);if(n.loading)return r.a.createElement($,null,"Loading...");var o=n.selectedCountryData[n.dateIndex];return r.a.createElement($,null,r.a.createElement("h2",null,a),r.a.createElement(Q,{store:n}),o&&r.a.createElement("div",null,r.a.createElement(Z,null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,o.biweeklyTotalPer100k),r.a.createElement("td",null,"Biweekly total cases per 100k")),r.a.createElement("tr",null,r.a.createElement("td",null,null!==(t=o.hospitalOccupancyPer100k)&&void 0!==t?t:"??"),r.a.createElement("td",null,"Hospital occupancy per 100k")),r.a.createElement("tr",null,r.a.createElement("td",null,o.cases),r.a.createElement("td",null,"new cases")),r.a.createElement("tr",null,r.a.createElement("td",null,o.deaths),r.a.createElement("td",null,"new deaths")))),!1),r.a.createElement(ee,null,r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.ecdc.europa.eu/en/publications-data/download-todays-data-geographic-distribution-covid-19-cases-worldwide"},"https://www.ecdc.europa.eu/en/publications-data/download-todays-data-geographic-distribution-covid-19-cases-worldwide"),r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.ecdc.europa.eu/en/publications-data/download-data-response-measures-covid-19"},"https://www.ecdc.europa.eu/en/publications-data/download-data-response-measures-covid-19")))}));function ne(){var e=Object(s.a)(["\n  padding-left: 3rem;\n"]);return ne=function(){return e},e}function ae(){var e=Object(s.a)(["\n  width: 100%;\n"]);return ae=function(){return e},e}var re=p.a.input(ae()),oe=p.a.div(ne()),ie=Object(c.a)((function(e){var t=Object(a.useCallback)((function(e){var t=e.target.value,n=L.startDate.getTime(),a=new Date(n+1e3*t*60*60*24);L.changeDate(a)}),[]),n=L.startDate,o=(L.visibleDate.getTime()-n.getTime())/1e3/60/60/24;return r.a.createElement("div",null,r.a.createElement("h2",null,"Timeline"),r.a.createElement(oe,null,r.a.createElement(re,{type:"range",min:0,max:L.dateCount,value:o,onChange:t}),r.a.createElement("p",null,L.visibleDate.toLocaleDateString())))}));function ce(){var e=Object(s.a)(["\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  display: flex;\n  z-index: 0;\n\n  > * {\n    flex: 1;\n  }\n"]);return ce=function(){return e},e}function le(){var e=Object(s.a)(["\n  background: white;\n  border-radius: 16px;\n  box-shadow: 0 -1px 1px 0 #e5e5e5, 0 1px 1px 0 #e5e5e5, 0 2px 2px 0 #e5e5e5,\n    0 4px 4px 0 #e5e5e5;\n\n  grid-area: ",";\n  z-index: 1;\n  padding: 0 1rem;\n  display: flex;\n  flex-direction: column;\n  overflow-y: scroll;\n"]);return le=function(){return e},e}function ue(){var e=Object(s.a)(['\n  height: 100vh;\n  width: 100%;\n  display: grid;\n  background: #f9f9f9;\n  padding: 1rem;\n  grid-template-columns: 1fr 37%;\n  grid-template-areas: "_ details";\n  grid-gap: 1rem;\n\n  @media (max-width: 800px) {\n    grid-template-columns: 1fr;\n    grid-template-rows: 1fr 60%;\n    grid-template-areas: "_" "details";\n\n    max-width: 800px;\n  }\n']);return ue=function(){return e},e}var se=p.a.div(ue()),pe=p.a.div(le(),(function(e){return e.area})),de=p.a.div(ce()),be=Object(c.a)((function(){return r.a.createElement(se,null,r.a.createElement(de,null,r.a.createElement(W,{store:L,onSelect:function(e){return L.selectCountry(e)}})),r.a.createElement(pe,{area:"details"},r.a.createElement(ie,null),r.a.createElement(te,{store:L})))})),fe=Object(c.a)((function(){return r.a.createElement(l.a,{basename:"/corona-map"},r.a.createElement(u.c,null,r.a.createElement(u.a,{path:"/",exact:!0},r.a.createElement(be,null))))}));i.a.render(r.a.createElement(fe,null),document.getElementById("root"))}},[[200,1,2]]]);
//# sourceMappingURL=main.e2d74c47.chunk.js.map